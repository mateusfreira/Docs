<html><head><style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\:form{display:block;}</style>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width">

  <title>Appbase Documentation</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" type="text/css" href="/Docs/bower_components/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="/Docs/bower_components/bootstrap/dist/css/bootstrap-theme.min.css">
  <script type="text/javascript">
    if (!Function.prototype.bind) {
Function.prototype.bind = function bind(that) { // .length is 1
        var slice = [].slice;
        var Empty = function(){};
        var target = this;
        if (typeof target != "function") {
            throw new TypeError("Function.prototype.bind called on incompatible " + target);
        }
        var args = slice.call(arguments, 1); // for normal call
        var bound = function () {

            if (this instanceof bound) {

                var result = target.apply(
                    this,
                    args.concat(slice.call(arguments))
                );
                if (Object(result) === result) {
                    return result;
                }
                return this;

            } else {
                return target.apply(
                    that,
                    args.concat(slice.call(arguments))
                );

            }

        };
        if(target.prototype) {
            Empty.prototype = target.prototype;
            bound.prototype = new Empty();
            Empty.prototype = null;
        }
        return bound;
    };  
}
  </script>
  <!-- Flatdoc -->
  <script type="text/javascript" src="/Docs/bower_components/jquery/dist/jquery.min.js"></script>
  <script type="text/javascript" src="/Docs/bower_components/flatdoc/legacy.js"></script>
  <script type="text/javascript" src="/Docs/bower_components/flatdoc/flatdoc.js"></script>

  <!-- Flatdoc theme -->
  <link rel="stylesheet" type="text/css" href="/Docs/bower_components/flatdoc/theme-white/style.css">
  <script type="text/javascript" src="/Docs/bower_components/docbase/scripts/flatdoc-theme.js"></script>

  <!-- DocBase -->
  <script type="text/javascript" src="/Docs/bower_components/angular/angular.js"></script>
  <script type="text/javascript" src="/Docs/bower_components/angular-route/angular-route.js"></script>
  <script type="text/javascript" src="/Docs/bower_components/js-schema/js-schema.min.js"></script>
  <script type="text/javascript" src="/Docs/bower_components/docbase/scripts/docbase.js"></script>
  <script src="/Docs/bower_components/google-code-prettify/bin/prettify.min.js"></script>
  <link rel="stylesheet" type="text/css" href="/Docs/bower_components/google-code-prettify/bin/prettify.min.css">
  <link rel="stylesheet" type="text/css" href="/Docs/bower_components/docbase/styles/main.css">
  <link rel="stylesheet" type="text/css" href="/Docs/bower_components/components-font-awesome/css/font-awesome.min.css">
  

  <!-- Custom -->
  <link rel="stylesheet" type="text/css" href="styles/main.css">

</head>
<body role="flatdoc" class="no-literate">
  <!--[if lt IE 10]>
     <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
  <![endif]-->

  <!-- ngView:  --><div ng-view="" class="ng-scope"><nav class="navbar navbar-default navbar-fixed-top ng-scope">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#/">
        <img src="images/logo.svg">
      </a>
    </div>

    <div class="collapse navbar-collapse" id="navbar-collapse">
      <ul class="nav navbar-nav">
      	<!-- ngRepeat: folder in map[currentVersion] --><li class="dropdown ng-scope" ng-repeat="folder in map[currentVersion]">
      		<a ng-href="#/v2.0/concepts" class="dropdown-toggle ng-binding" data-toggle="dropdown" role="button" aria-expanded="false" ng-bind="folder.label" href="#/v2.0/concepts">concepts</a>
      		<ul class="dropdown-menu">
      		  <!-- ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
      		  	<a ng-href=/Docs/v2.0/concepts/datamodel.html ng-bind="file.label" class="ng-binding" href=/Docs/v2.0/concepts/datamodel.html>datamodel</a>
      		  </li><!-- end ngRepeat: file in folder.files -->
      		</ul>
      	</li><!-- end ngRepeat: folder in map[currentVersion] --><li class="dropdown ng-scope" ng-repeat="folder in map[currentVersion]">
      		<a ng-href="#/v2.0/javascript" class="dropdown-toggle ng-binding" data-toggle="dropdown" role="button" aria-expanded="false" ng-bind="folder.label" href="#/v2.0/javascript">javascript</a>
      		<ul class="dropdown-menu">
      		  <!-- ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
      		  	<a ng-href=/Docs/v2.0/javascript/angular.html ng-bind="file.label" class="ng-binding" href=/Docs/v2.0/javascript/angular.html>angular</a>
      		  </li><!-- end ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
      		  	<a ng-href=/Docs/v2.0/javascript/api-reference.html ng-bind="file.label" class="ng-binding" href=/Docs/v2.0/javascript/api-reference.html>api-reference</a>
      		  </li><!-- end ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
      		  	<a ng-href=/Docs/v2.0/javascript/oauth.html ng-bind="file.label" class="ng-binding" href=/Docs/v2.0/javascript/oauth.html>oauth</a>
      		  </li><!-- end ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
      		  	<a ng-href=/Docs/v2.0/javascript/quick-start.html ng-bind="file.label" class="ng-binding" href=/Docs/v2.0/javascript/quick-start.html>quick-start</a>
      		  </li><!-- end ngRepeat: file in folder.files -->
      		</ul>
      	</li><!-- end ngRepeat: folder in map[currentVersion] --><li class="dropdown ng-scope" ng-repeat="folder in map[currentVersion]">
      		<a ng-href="#/v2.0/rest" class="dropdown-toggle ng-binding" data-toggle="dropdown" role="button" aria-expanded="false" ng-bind="folder.label" href="#/v2.0/rest">rest</a>
      		<ul class="dropdown-menu">
      		  <!-- ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
      		  	<a ng-href=/Docs/v2.0/rest/api-reference.html ng-bind="file.label" class="ng-binding" href=/Docs/v2.0/rest/api-reference.html>api-reference</a>
      		  </li><!-- end ngRepeat: file in folder.files -->
      		</ul>
      	</li><!-- end ngRepeat: folder in map[currentVersion] --><li class="dropdown ng-scope" ng-repeat="folder in map[currentVersion]">
      		<a ng-href="#/v2.0/search" class="dropdown-toggle ng-binding" data-toggle="dropdown" role="button" aria-expanded="false" ng-bind="folder.label" href="#/v2.0/search">search</a>
      		<ul class="dropdown-menu">
      		  <!-- ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
      		  	<a ng-href=/Docs/v2.0/search/quick-start.html ng-bind="file.label" class="ng-binding" href=/Docs/v2.0/search/quick-start.html>quick-start</a>
      		  </li><!-- end ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
      		  	<a ng-href=/Docs/v2.0/search/use-cases.html ng-bind="file.label" class="ng-binding" href=/Docs/v2.0/search/use-cases.html>use-cases</a>
      		  </li><!-- end ngRepeat: file in folder.files -->
      		</ul>
      	</li><!-- end ngRepeat: folder in map[currentVersion] -->
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
          	 <span ng-bind="currentVersion" class="ng-binding">v2.0</span> <span class="caret"></span>
          </a>
          <ul class="dropdown-menu version-switcher" role="menu">
          	<!-- ngRepeat: version in versions --><li ng-repeat="version in versions" class="ng-scope">
          		<a ng-href=/Docs/v2.0.html ng-bind="version" class="ng-binding" href=/Docs/v2.0.html>v2.0</a>
          	</li><!-- end ngRepeat: version in versions --><li ng-repeat="version in versions" class="ng-scope">
          		<a ng-href=/Docs/v3.0.html ng-bind="version" class="ng-binding" href=/Docs/v3.0.html>v3.0</a>
          	</li><!-- end ngRepeat: version in versions -->
          </ul>
        </li>
        <li class="github-star">
          <iframe src="https://ghbtns.com/github-btn.html?user=appbaseio&amp;repo=Docs&amp;type=star&amp;count=true" frameborder="0" scrolling="0" width="170px" height="20px"></iframe>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
<div role="flatdoc" class="content-root ng-scope">
  <div class="menubar fixed">
    <div class="menu section" role="flatdoc-menu"><ul><li id="root-item" class="level-0"><ul class="level-1" id="root-list"><li id="title-datamodel-threecolumns-false-item" class="level-1"><a id="title-datamodel-threecolumns-false-link" href="/Docs/v2.0/concepts/datamodel.html#title-datamodel-threecolumns-false" class="level-1" pref="#title-datamodel-threecolumns-false">Datamodel</a><ul class="level-2" id="title-datamodel-threecolumns-false-list"><li id="title-datamodel-threecolumns-false-data-in-appbase-item" class="level-2"><a id="title-datamodel-threecolumns-false-data-in-appbase-link" href="/Docs/v2.0/concepts/datamodel.html#title-datamodel-threecolumns-false-data-in-appbase" class="level-2" pref="#title-datamodel-threecolumns-false-data-in-appbase">Data in Appbase</a></li><li id="title-datamodel-threecolumns-false-concepts-item" class="level-2"><a id="title-datamodel-threecolumns-false-concepts-link" href="/Docs/v2.0/concepts/datamodel.html#title-datamodel-threecolumns-false-concepts" class="level-2" pref="#title-datamodel-threecolumns-false-concepts">Concepts</a><ul class="level-3" id="title-datamodel-threecolumns-false-concepts-list"><li id="title-datamodel-threecolumns-false-concepts-vertex-item" class="level-3"><a id="title-datamodel-threecolumns-false-concepts-vertex-link" href="/Docs/v2.0/concepts/datamodel.html#title-datamodel-threecolumns-false-concepts-vertex" class="level-3" pref="#title-datamodel-threecolumns-false-concepts-vertex">Vertex</a></li><li id="title-datamodel-threecolumns-false-concepts-namespace-item" class="level-3"><a id="title-datamodel-threecolumns-false-concepts-namespace-link" href="/Docs/v2.0/concepts/datamodel.html#title-datamodel-threecolumns-false-concepts-namespace" class="level-3" pref="#title-datamodel-threecolumns-false-concepts-namespace">Namespace</a></li><li id="title-datamodel-threecolumns-false-concepts-edge-one-to-one-relationships-item" class="level-3"><a id="title-datamodel-threecolumns-false-concepts-edge-one-to-one-relationships-link" href="/Docs/v2.0/concepts/datamodel.html#title-datamodel-threecolumns-false-concepts-edge-one-to-one-relationships" class="level-3" pref="#title-datamodel-threecolumns-false-concepts-edge-one-to-one-relationships">Edge (one-to-one relationships)</a></li><li id="title-datamodel-threecolumns-false-concepts-path-item" class="level-3"><a id="title-datamodel-threecolumns-false-concepts-path-link" href="/Docs/v2.0/concepts/datamodel.html#title-datamodel-threecolumns-false-concepts-path" class="level-3" pref="#title-datamodel-threecolumns-false-concepts-path">Path</a></li><li id="title-datamodel-threecolumns-false-concepts-url-item" class="level-3"><a id="title-datamodel-threecolumns-false-concepts-url-link" href="/Docs/v2.0/concepts/datamodel.html#title-datamodel-threecolumns-false-concepts-url" class="level-3" pref="#title-datamodel-threecolumns-false-concepts-url">URL</a></li></ul></li><li id="title-datamodel-threecolumns-false-storing-data-item" class="level-2"><a id="title-datamodel-threecolumns-false-storing-data-link" href="/Docs/v2.0/concepts/datamodel.html#title-datamodel-threecolumns-false-storing-data" class="level-2" pref="#title-datamodel-threecolumns-false-storing-data">Storing Data</a><ul class="level-3" id="title-datamodel-threecolumns-false-storing-data-list"><li id="title-datamodel-threecolumns-false-storing-data-primitive-data-and-json-objects-item" class="level-3"><a id="title-datamodel-threecolumns-false-storing-data-primitive-data-and-json-objects-link" href="/Docs/v2.0/concepts/datamodel.html#title-datamodel-threecolumns-false-storing-data-primitive-data-and-json-objects" class="level-3" pref="#title-datamodel-threecolumns-false-storing-data-primitive-data-and-json-objects">Primitive Data and JSON Objects</a></li><li id="title-datamodel-threecolumns-false-storing-data-nested-json-objects-item" class="level-3"><a id="title-datamodel-threecolumns-false-storing-data-nested-json-objects-link" href="/Docs/v2.0/concepts/datamodel.html#title-datamodel-threecolumns-false-storing-data-nested-json-objects" class="level-3" pref="#title-datamodel-threecolumns-false-storing-data-nested-json-objects">Nested JSON Objects</a></li><li id="title-datamodel-threecolumns-false-storing-data-sets-one-to-many-relationship-item" class="level-3"><a id="title-datamodel-threecolumns-false-storing-data-sets-one-to-many-relationship-link" href="/Docs/v2.0/concepts/datamodel.html#title-datamodel-threecolumns-false-storing-data-sets-one-to-many-relationship" class="level-3" pref="#title-datamodel-threecolumns-false-storing-data-sets-one-to-many-relationship">Sets (One-to-Many Relationship)</a></li></ul></li><li id="title-datamodel-threecolumns-false-retrieving-data-item" class="level-2"><a id="title-datamodel-threecolumns-false-retrieving-data-link" href="/Docs/v2.0/concepts/datamodel.html#title-datamodel-threecolumns-false-retrieving-data" class="level-2" pref="#title-datamodel-threecolumns-false-retrieving-data">Retrieving Data</a><ul class="level-3" id="title-datamodel-threecolumns-false-retrieving-data-list"><li id="title-datamodel-threecolumns-false-retrieving-data-properties-item" class="level-3"><a id="title-datamodel-threecolumns-false-retrieving-data-properties-link" href="/Docs/v2.0/concepts/datamodel.html#title-datamodel-threecolumns-false-retrieving-data-properties" class="level-3" pref="#title-datamodel-threecolumns-false-retrieving-data-properties">Properties</a></li><li id="title-datamodel-threecolumns-false-retrieving-data-edges-item" class="level-3"><a id="title-datamodel-threecolumns-false-retrieving-data-edges-link" href="/Docs/v2.0/concepts/datamodel.html#title-datamodel-threecolumns-false-retrieving-data-edges" class="level-3" pref="#title-datamodel-threecolumns-false-retrieving-data-edges">Edges</a></li><li id="title-datamodel-threecolumns-false-retrieving-data-vertices-in-a-namespace-item" class="level-3"><a id="title-datamodel-threecolumns-false-retrieving-data-vertices-in-a-namespace-link" href="/Docs/v2.0/concepts/datamodel.html#title-datamodel-threecolumns-false-retrieving-data-vertices-in-a-namespace" class="level-3" pref="#title-datamodel-threecolumns-false-retrieving-data-vertices-in-a-namespace">Vertices in a Namespace</a></li></ul></li></ul></li></ul></li></ul></div>
  </div>
  <div role="flatdoc-content" class="content"><h1 id="title-datamodel-threecolumns-false">Datamodel</h1><p>Appbase is a realtime Database as a Service (DBaaS), built on top of a graph schema with JSON based vertices (similar to JSON documents), and edges to link them.</p><p>All databases support the storing and fetching of data, what distinguishes one database type from another is the structure of the data they store and the means by which it can be retrieved. </p><p>Several popular databases can be classified as below:
0. Something here
1. <a href="http://en.wikipedia.org/wiki/SQL">Relational (SQL) Databases</a> SQLite, PostgreSQL<br>2. <a href="http://en.wikipedia.org/wiki/NoSQL">NoSQL Databases</a><br>  a. <a href="http://en.wikipedia.org/wiki/NoSQL#Key-value_stores">Key/Value Store</a>  Redis, Riak<br>  b. <a href="http://en.wikipedia.org/wiki/Column-oriented_DBMS">Columnar Store</a> Cassandra, HBase<br>  c. <a href="http://en.wikipedia.org/wiki/NoSQL#Document_store">Document Store</a> CouchBase, MongoDB<br>  d. <a href="http://en.wikipedia.org/wiki/Graph_database">Graph Store</a> Neo4j, TitanDB  </p><h2 id="title-datamodel-threecolumns-false-data-in-appbase">Data in Appbase</h2><p>Appbase is a <a href="http://en.wikipedia.org/wiki/Directed_graph"><em>Directed Graph</em></a>. Objects inside Appbase are called <a href="http://en.wikipedia.org/wiki/Vertex_(graph_theory">Vertices</a>) (a graph term for entities), and the links (relationships) between the objects are called <a href="http://en.wikipedia.org/wiki/Glossary_of_graph_theory#Basics">Edges</a>.</p><p>Data in Appbase is stored as JSON objects. Appbase supports flexible schema, i.e. the properties of the JSON object need not be defined in advance. </p><p>Although Appbase supports storing embedded JSON objects and arrays, one doesn’t have to store data in this denormalized fashion. This is mainly for compatibility with existing document stores like MongoDB. The recommended approach is to create reference links between distint entities. In this doc, we will cover how you can store different kinds data (primitive values, objects, lists), create relationships amongst them, normalize, and do perform different queries on them.</p><h2 id="title-datamodel-threecolumns-false-concepts">Concepts</h2><p>Similar to how SQL has concepts for <em>table</em>, <em>row</em>, <em>column</em>, <em>relation</em> and MongoDB has <em>collection</em> , <em>Document</em> and <em>fields</em>, here are the key concepts in Appbase.</p><ol>
<li><p><strong>Vertex</strong> — is similar to a <em>Document</em> in MongoDB, it stores data.  </p>
<ul>
<li><strong>Key</strong> — A string that is used to access the vertex as an entry point.</li>
<li><strong>Properties</strong> — A JSON object representing the data inside the vertex. </li>
</ul>
</li>
<li><p><strong>Namespace</strong> — is similar to a <em>Collection</em> in MongoDB or <em>type</em> in ElasticSearch. A <em>vertex</em> always belongs to a <em>namespace</em> and <em>security rules</em> can be applied on <em>namespaces</em>. </p>
</li>
<li><p><strong>Edge</strong> — is a directional link to another vertex.  </p>
<ul>
<li><strong>Priority</strong> — An <em>edge</em> can optionally have a priority, a <strong>Number</strong> (a secondary index).</li>
<li><strong>outVertex</strong> — is the vertex which the edge points <em>to</em>.</li>
<li><strong>inVertex</strong>  — the vertex <em>from</em> which the edge starts.</li>
</ul>
<p>i.e. an <em>edge</em> is pointed from <em>inVertex</em> to an <em>outVertex</em>.</p>
</li>
<li><p><strong>Path</strong> — Every <em>vertex</em> in Appbase has a path, starting from the &lt;namespace&gt; and ending at the <em>vertex</em>, not unlike the UNIX path. A typical path looks like &lt;namespace&gt;/&lt;v1&gt;/&lt;v2&gt;/…/&lt;vn&gt;/.</p>
</li>
<li><p><strong>URL</strong> — It is a way to point to a <em>Path</em> in the REST API. Paths are prefixed with the Appbase API base URL, application’s name and the API version. Eg. <a href="https://api.appbase.io/chat_app/v2/&lt;path&gt;/">https://api.appbase.io/chat_app/v2/&lt;path&gt;/</a>.</p>
</li>
</ol><p>We can not actually compare these concepts with other kinds of databases, but it helps to understand Appbase if we compare the <em>usage practices</em>.</p><table>
<thead>
<tr>
<th>Usage</th>
<th>Appbase</th>
<th>MongoDB</th>
<th>RDBMS</th>
</tr>
</thead>
<tbody>
<tr>
<td>Combine similar entities</td>
<td>Namespace</td>
<td>Collection</td>
<td>Table</td>
</tr>
<tr>
<td>Data containers</td>
<td>Vertex</td>
<td>Document</td>
<td>Row</td>
</tr>
<tr>
<td>The Data</td>
<td>Properties</td>
<td>JSON data inside the object</td>
<td>Columns’ values in a Row</td>
</tr>
<tr>
<td>Unique identifier of an entity</td>
<td>Vertex Key</td>
<td>ObjectId</td>
<td>Primary Key</td>
</tr>
<tr>
<td>Creating <em>Relations</em></td>
<td>Edge</td>
<td>Reference/DBRef</td>
<td>Foreign Key</td>
</tr>
<tr>
<td>Traversing through the data <em>relevant</em> to an entity</td>
<td>Path</td>
<td>-</td>
<td>Apply <em>JOINs</em> with a single <em>Primary Key</em> and then a set of linked <em>Foreign Keys</em>, to reach the target Row</td>
</tr>
<tr>
<td>Attach some useful information about the <em>Relation</em>, which can also be used to filter/sort them while fetching</td>
<td>Priority</td>
<td>-</td>
<td>Extra numeric data attached with a <em>Relation</em></td>
</tr>
</tbody>
</table><p>With this table in mind, lets understand how the concepts work.</p><h3 id="title-datamodel-threecolumns-false-concepts-vertex">Vertex</h3><p>Vertex is the the standard data container in Appbase. A vertex can store a valid JSON object and be linked to other vertices via <em>edges</em>.</p><p>It can also store nested JSON objects and arrays, but this is only for convenience. In practice, vertices act as singular data entities, i.e. you store only the data relevant to a single entity in the real world. For e.g. a person’s age, name, height, sex can be stored in a single vertex, but the data of his belongings, like a book or a car is a completely different entity. This new entity will have properties of its own and they should be stored inside a new vertex. Later in this document, we will see how we can create a relation between these two entities.</p><h3 id="title-datamodel-threecolumns-false-concepts-namespace">Namespace</h3><p>Namespaces are a way to combine <em>similar</em> entities. For eg. all vertices storing different users can be stored inside the <em>user</em> namespace and all the tweets (repreented as vertices) can be stored inside the <em>tweet</em> namespace. Since namespace is a logical container, different kinds of objects can be stored inside a single namespace. This allows searching for <em>similar vertices</em> and applying <em>security rules</em> with ease.</p><p>Namespaces are <em>searchable</em>. We are using the open-source <a href="http://www.elasticsearch.org/">ElasticSearch</a> behind the scenes to support this use-case. See <a href="http://docs.appbase.io/docs/search.html">this documentation</a> for a quick intro on how search works.</p><h3 id="title-datamodel-threecolumns-false-concepts-edge-one-to-one-relationships">Edge (one-to-one relationships)</h3><p>After creating entities, its time to create relations amongst them via <em>edges</em>. </p><p>An edge is a <em>named</em> directional link connecting two vertices for a purpose, a <em>one-to-one relation</em>. For instance, a book has an author, a husband has wife and a child has a mother. The edges for these would be <em>book vertex</em> <code>--authouredBy-&gt;</code> <em>person vertex</em>, <em>man vertex</em> <code>--marriedTo-&gt;</code> <em>woman vertex</em>. </p><p>Edges are directional, so if you set the edge <em>man</em> <code>--crushOn-&gt;</code> <em>woman</em>, it only tells us that the man is married to the woman, but it tells us nothing about woman’s relationship status. For that, another edge, <em>woman</em> <code>--marriedTo-&gt;</code> <em>man</em>, should be created.</p><p>Appbase only allows for unique edge names. The default behaviour is last-write-wins in case a new edge is created with an existing name. Edges have priorities which are rational numbers (think of the <code>Number</code> datatype in Javascript).</p><h3 id="title-datamodel-threecolumns-false-concepts-path">Path</h3><p>Paths are the way to interact with vertices in Appbase. Paths are constructed with &lt;namespace&gt;/&lt;vertexKey&gt;/&lt;edgeName_1&gt;/…/&lt;edgeName_N&gt;/.</p><p>Creating edges create deeper <em>Paths</em>. Lets take the example of the movie Inception, the Oscar deserver lead actor Leonardo DiCaprio, and the director Christopher Nolan. Here are the vertices stored in Appbase:</p><ol>
<li>The Movie: Inception<ul>
<li>Namespace: movie</li>
<li>Vertex Key: inception</li>
</ul>
</li>
<li>DiCaprio<ul>
<li>Namespace: person</li>
<li>Vertex Key: dicaprio</li>
</ul>
</li>
<li>Nolan<ul>
<li>Namespace: person</li>
<li>Vertex Key: nolan</li>
</ul>
</li>
<li>Nolan’s wife<ul>
<li>Namespace: person</li>
<li>Vertex Key: emma</li>
</ul>
</li>
</ol><p>These vertices can be accessed with the following paths, as entry points in the graph:</p><ol>
<li><code>movie/inception</code></li>
<li><code>person/dicaprio</code></li>
<li><code>person/nolan</code></li>
<li><code>person/emma</code></li>
</ol><p>Let’s create edges:</p><ol>
<li>movie/inception <code>--leadActor-&gt;</code> person/dicaprio</li>
<li>movie/inception <code>--directedBy-&gt;</code> person/nolan</li>
<li>person/nolan <code>--marriedTo-&gt;</code>person/emma</li>
</ol><p><img src="http://i.imgur.com/2Asfr9r.png" alt=""></p><p>With these edge, we created these deeper paths:</p><ol>
<li><p><code>movie/inception/leadActor</code> : points to the same vertex as <code>person/dicaprio</code></p>
</li>
<li><p><code>movie/inception/directedBy</code> : points to <code>person/nolan</code></p>
</li>
<li><p><code>person/nolan/marriedTo</code>: points to <code>person/emma</code></p>
</li>
<li><p>Here’s the <em>magic</em>, the path <code>movie/inception/directedBy/marriedTo</code> points directly to <code>person/emma</code></p>
</li>
</ol><p>This means, modifying the data stored at <code>movie/inception/directedBy/marriedTo</code> will change the data of <code>person/emma</code> as they both are the same vertices.</p><p>Paths are powerful ways to point to the exact data you want to interact with. For e.g.  when you access the path <code>movie/inception/directedBy/marriedTo</code>, you are only interested in the vertex representing the person who is married to the director of Inception, and nothing else. You never access the data of the movie Inception, or the director.</p><h3 id="title-datamodel-threecolumns-false-concepts-url">URL</h3><p>A URL is just another representation of a <em>Path</em>. REST API URL looks like this: <a href="https://api.appbase.io/&lt;app_name&gt;/v2/&lt;path&gt;/">https://api.appbase.io/&lt;app_name&gt;/v2/&lt;path&gt;/</a>. </p><p>Assuming the Application’s name as <em>imdb</em>, URL for the path <em>movie/inception/directedBy/marriedTo</em> would be <code>https://api.appbase.io/imdb/v2/movie/inception/directedBy/marriedTo</code></p><hr><h2 id="title-datamodel-threecolumns-false-storing-data">Storing Data</h2><p>Being a Graph, Appbase allows you to create any kind of data structures you want, you just need to know exactly how. Lets see how to store the practical data structures we used on daily basis.</p><p>The examples here use Appbase Javascript Library and if any of the method is confusing you, feel free to chekout the <a href="http://docs.appbase.io/docs/js.html">JS Documentation</a>. </p><h3 id="title-datamodel-threecolumns-false-storing-data-primitive-data-and-json-objects">Primitive Data and JSON Objects</h3><p>Numbers, Characters, Strings and Booleans, are stored as values of the properties inside a vertex. Dates can be converted into the milliseconds since epoch, and store them as Numbers. For eg. you want to store a the movie’s name, and its release year, you can store combine all of them as a JSON object and store it inside a vertex.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="kwd">var</span><span class="pln"> data </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    name</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"Inception"</span></span><span class="pun">,</span><span class="pln">
    year</span><span class="pun">:</span><span class="pln"> </span><span class="number"><span class="lit">2010</span></span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">(</span><span class="string"><span class="str">'movie'</span></span><span class="pun">).</span><span class="pln">v</span><span class="pun">(</span><span class="string"><span class="str">'inception'</span></span><span class="pun">).</span><span class="pln">setData</span><span class="pun">(</span><span class="pln">data</span><span class="pun">);</span></code></pre><h3 id="title-datamodel-threecolumns-false-storing-data-nested-json-objects">Nested JSON Objects</h3><p>You can store nested objects directly inside a vertex. E.g.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="kwd">var</span><span class="pln"> data </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    name</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"Inception"</span></span><span class="pun">,</span><span class="pln">
    year</span><span class="pun">:</span><span class="pln"> </span><span class="number"><span class="lit">2010</span></span><span class="pun">,</span><span class="pln">
    directedBy</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        name</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"Christopher Nolan"</span></span><span class="pun">,</span><span class="pln">
        sex</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"M"</span></span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">(</span><span class="string"><span class="str">'movie'</span></span><span class="pun">).</span><span class="pln">v</span><span class="pun">(</span><span class="string"><span class="str">'inception'</span></span><span class="pun">).</span><span class="pln">setData</span><span class="pun">(</span><span class="pln">data</span><span class="pun">);</span></code></pre><p>This would work perfectly. Notice that you are not storing the director (Nolan) of Inception as a <em>different entity</em>, instead as a <em>property</em> of the movie itself. While this approach is sometimes handy, it limits you in terms of what you can do with Nolan. I.e. you will not be able to establish any direct relationships with Nolan, as it is not an entity in itself. For eg. Nolan is married to Emma, but there is no way to create a link between Nolan  and Emma, when it is stored as a nested object in Appbase.</p><p>A better to do this is store Nolan as a new vertex, and create an edge from Inception to Nolan. You can create another vertex for Emma create edges with Nolan. </p><p>We will create three edges here: </p><ol>
<li><p>inception <code>--directedBy-&gt;</code> nolan</p>
</li>
<li><p>nolan <code>--marriedTo-&gt;</code> emma
Recall that the edges are <em>directional</em>, so this 2nd edge only tells us that Nolan in married to Emma, but says nothing about Emma’s marital status. That’s why we create the third edge: </p>
</li>
<li><p>emma <code>--marriedTo-&gt;</code> nolan</p>
</li>
</ol><p><img src="http://i.imgur.com/IipHJzL.png" alt=""></p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="kwd">var</span><span class="pln"> movieData </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    name</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"Inception"</span></span><span class="pun">,</span><span class="pln">
    year</span><span class="pun">:</span><span class="pln"> </span><span class="number"><span class="lit">2010</span></span><span class="pln">
</span><span class="pun">},</span><span class="pln"> nolanData </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    name</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"Christopher Nolan"</span></span><span class="pun">,</span><span class="pln">
    sex</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"M"</span></span><span class="pln">
</span><span class="pun">},</span><span class="pln"> emmaData </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    name</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"Emma Thomas"</span></span><span class="pun">,</span><span class="pln">
    sex</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"F"</span></span><span class="pln">
</span><span class="pun">};</span><span class="pln">

</span><span class="kwd">var</span><span class="pln"> movieRef </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">(</span><span class="string"><span class="str">'movie'</span></span><span class="pun">).</span><span class="pln">v</span><span class="pun">(</span><span class="string"><span class="str">'inception'</span></span><span class="pun">);</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> nolanRef </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">(</span><span class="string"><span class="str">'person'</span></span><span class="pun">).</span><span class="pln">v</span><span class="pun">(</span><span class="string"><span class="str">'nolan'</span></span><span class="pun">);</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> emmaRef </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">(</span><span class="string"><span class="str">'person'</span></span><span class="pun">).</span><span class="pln">v</span><span class="pun">(</span><span class="string"><span class="str">'emma'</span></span><span class="pun">);</span><span class="pln">

movieRef</span><span class="pun">.</span><span class="pln">setEdge</span><span class="pun">(</span><span class="string"><span class="str">'directedBy'</span></span><span class="pun">,</span><span class="pln"> nolanRef</span><span class="pun">);</span><span class="pln">
nolanRef</span><span class="pun">.</span><span class="pln">setEdge</span><span class="pun">(</span><span class="string"><span class="str">'marriedTo'</span></span><span class="pun">,</span><span class="pln"> emmaRef</span><span class="pun">);</span><span class="pln">
emmaRef</span><span class="pun">.</span><span class="pln">setEdge</span><span class="pun">(</span><span class="string"><span class="str">'marriedTo'</span></span><span class="pun">,</span><span class="pln"> nolanRef</span><span class="pun">);</span></code></pre><p>Notice that Inception directed by Nolan, is a One-to-One relationship. Nolan has directed many movies, and that’s a case of One-to-Many relationships. We see later how to create them in Appbase. </p><h3 id="title-datamodel-threecolumns-false-storing-data-sets-one-to-many-relationship">Sets (One-to-Many Relationship)</h3><p>A set makes sure that all the items in the list exist only once. Consider this example, the movies directed by Nolan. We will make only a small list here:  <code>["Interstellar", "Inception", "The Dark Night", "Memento"]</code>. Clearly, it doesn’t make sense to have any of the movies twice in the this list.  Notice that this is a One-to-Many relationship here. <em>Nolan</em> (1) -&gt; <em>Movies</em> (N).</p><p>Operations on a single set are: addition, checking existence of an item, deletion and traversal. </p><p>Operations on multiple sets, like union and intersection can be emulated using single-set operations. For e.g.</p><ol>
<li>intersection can be achieved by traversing through one set and checking existence of those items in the other set</li>
<li>union is similar to traversing through one set and adding non-existing items into the second set, the second set becomes the union of two</li>
</ol><p>Let’s see a practical set, the movies directed by Nolan. </p><h4>The Set and the set Items</h4><p>In Appbase, the Set is a vertex, let’s create it.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="kwd">var</span><span class="pln"> setRef </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">(</span><span class="string"><span class="str">'set'</span></span><span class="pun">).</span><span class="pln">v</span><span class="pun">(</span><span class="string"><span class="str">'moviesByNolan'</span></span><span class="pun">);</span></code></pre><p>Also the Items in the set are vertices.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="kwd">var</span><span class="pln"> inceptionRef </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">(</span><span class="string"><span class="str">'movie'</span></span><span class="pun">).</span><span class="pln">v</span><span class="pun">(</span><span class="string"><span class="str">'inception'</span></span><span class="pun">);</span><span class="pln">
inceptionRef</span><span class="pun">.</span><span class="pln">setData</span><span class="pun">({</span><span class="pln">
    name</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"Inception"</span></span><span class="pun">,</span><span class="pln">
    year</span><span class="pun">:</span><span class="pln"> </span><span class="number"><span class="lit">2010</span></span><span class="pln">
</span><span class="pun">});</span><span class="pln">

</span><span class="com">/* 
Similarly create `interstellarRef`, `theDarkNightRef`, and `mementoRef`.
*/</span></code></pre><p>Now we have Appbase Vertex References to the Set and the Items, lets go through different set operations.</p><h4>Addition</h4><p>Simply creating an edge from the Set to the Item. We will use the Primary Key (<code>inceptionRef.name()</code>) of the item as the name of the edge.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="pln">setRef</span><span class="pun">.</span><span class="pln">setEdge</span><span class="pun">(</span><span class="pln">inceptionRef</span><span class="pun">.</span><span class="pln">name</span><span class="pun">(),</span><span class="pln"> inceptionRef</span><span class="pun">);</span></code></pre><p>Here, the important thing is to keep the edge-name exactly as the Vertex Key. That way makes sure that every item will exist only once in the set. For e.g. if you try to add <code>inceptionRef</code> again in the set, it will just replace the old edge no extra edges will be created.</p><p>Keeping the edge-name same as the Vertex Key of the item, allows other operations as well, like deletion of an Item and checking where an Item exists.</p><h4>Deletion</h4><p>Remove the edge from Set to the Item.</p><pre><code class="prettyprint prettyprinted" style=""><span class="pln">setRef</span><span class="pun">.</span><span class="pln">removeEdge</span><span class="pun">(</span><span class="pln">inceptionRef</span><span class="pun">.</span><span class="pln">name</span><span class="pun">());</span></code></pre><p>As we kept the edge name exactly as the Vertex Key, it means that we can use the Vertex Key to delete the edge as well.</p><h4>Existence Check</h4><p>It’s not possible to check via the Item’s data, if the item exists or not. The only way we can check, is using the Vertex Key/edge-name. We see that if there’s an edge, with its name as the Vertex Key. We use <code>outVertex()</code> and <code>isValid()</code> for that. I.e. we are checking if the path <code>set/moviesByNolan/&lt;movieVertexKey&gt;</code> is valid or not.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="pln">setRef</span><span class="pun">.</span><span class="pln">outVertex</span><span class="pun">(</span><span class="pln">inceptionRef</span><span class="pun">.</span><span class="pln">name</span><span class="pun">()).</span><span class="pln">isValid</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> validity</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(!</span><span class="pln">error</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">inceptionRef</span><span class="pun">.</span><span class="pln">name</span><span class="pun">(),</span><span class="pln"> validity</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">error</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">});</span></code></pre><h4>Traversal</h4><p>As all the items are the edges of the Set vertex, we simply fetch the edges of the Set vertex, and traverse through them.</p><p>See <em>Retrieving Data</em> section.</p><h2 id="title-datamodel-threecolumns-false-retrieving-data">Retrieving Data</h2><p>In a nutshell, Namspaces in Appbase have vertices, and vertices have properties, edges.</p><p>Data retrieval in Appbase happens via <em>realtime streams</em>. These streams allows you to fetch existing data, and then keep listening to new data as well.</p><h3 id="title-datamodel-threecolumns-false-retrieving-data-properties">Properties</h3><p>When you start listening to the properties of a vertex, you first get the existing properties, and then as the data keeps changing, the callback is called again with new properties.</p><p>Appbase gives you the properties data as a <em>snapshot</em>. The snapshots are immutable copies of the data stored in a vertex. Any changes you make in the snapshot will not be stored in Appbase. </p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="kwd">var</span><span class="pln"> inceptionRef </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">(</span><span class="string"><span class="str">"movie"</span></span><span class="pun">).</span><span class="pln">v</span><span class="pun">(</span><span class="string"><span class="str">"inception"</span></span><span class="pun">)</span><span class="pln">
inceptionRef</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="string"><span class="str">"properties"</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> vRef</span><span class="pun">,</span><span class="pln"> vSnapshot</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">vSnapshot</span><span class="pun">.</span><span class="pln">properties</span><span class="pun">());</span><span class="pln">
</span><span class="pun">});</span></code></pre><p>If you don’t want to listen to the properties any more, you can turn the listener off with <code>inceptionRef.off()</code>.</p><p>For convenience, we have the method  <code>inceptionRef.once()</code> when you want to listen to daat just only once.</p><h3 id="title-datamodel-threecolumns-false-retrieving-data-edges">Edges</h3><p>Retrieving existing edges of a vertex is simple: just listen to <em>edge_added</em> event, which will return existing edges at first. When new edges are added, the callback will be fired for new edges as well.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="kwd">var</span><span class="pln"> moviesRef </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">(</span><span class="string"><span class="str">"set"</span></span><span class="pun">).</span><span class="pln">v</span><span class="pun">(</span><span class="string"><span class="str">"moviesByNolan"</span></span><span class="pun">);</span><span class="pln">
moviesRef</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="string"><span class="str">'edge_added'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> eRef</span><span class="pun">,</span><span class="pln"> eSnap</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">});</span></code></pre><p>Notice that the if there are ‘N’ number of existing edges, the callback will be called ‘N’ times.</p><p><code>eRef</code> here is the Appbase Reference to the outVertex, and <code>eSnap</code> is the snapshot of the edge. Edge Snapshot is the snapshot of the data stored with the edge and the out vertex, mainly the <em>priority</em> of the edge, and the properties of the out vertex. <code>eSnap.priority()</code> will give you the priority, and <code>eSnap.properties()</code> will give you properties.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="kwd">var</span><span class="pln"> moviesRef </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">(</span><span class="string"><span class="str">"set"</span></span><span class="pun">).</span><span class="pln">v</span><span class="pun">(</span><span class="string"><span class="str">"moviesByNolan"</span></span><span class="pun">);</span><span class="pln">
moviesRef</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="string"><span class="str">'edge_added'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> eRef</span><span class="pun">,</span><span class="pln"> eSnap</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">eSnap</span><span class="pun">.</span><span class="pln">properties</span><span class="pun">());</span><span class="pln">
</span><span class="pun">});</span></code></pre><h4>Filters</h4><p>With edge filters, it is possible to fetch only certain edges. It comes handy when there are large number of edges and you want to paginate them, or want to fetch only a particular edge.</p><p>When more than one filter is provided, they work as logical <code>AND</code> and only the edges matchihg all filters will be fetched. This is what each filter means:</p><ol>
<li><strong>startAt</strong> <code>Number</code> - Edges having priorities equal or more than this</li>
<li><strong>endAt</strong> <code>Number</code> - Edges having priorities equal or less than this</li>
<li><strong>limit</strong> <code>Number</code> - Only this number of edges</li>
<li><strong>skip</strong> <code>Number</code> - Skipping certain number of edges, which match all the other filters</li>
<li><strong>onlyNew</strong> <code>Boolean</code> - return only newly created edges</li>
</ol><p>Notice that:
 - Filters are a way to fetch existing edges, thus they work only with <em>edge_added</em> event
 - Edges are always returned ordered according to their priorities
 - When <em>endAt</em> &lt; <em>startAt</em>, edges are returned in reverse order
 - You can NOT apply all the numeric filters (first four) to newly created edges, they are only for existing edges and it is NOT possible to apply filters to newly created edges in realtime
    - This means that the numeric filters can not be used with <em>onlyNew</em> set to be <code>true</code>
    - <em>Newly created</em> edges will NOT be fired when any of the numeric filter is applied, i.e. only the existing edges will be returned</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="kwd">var</span><span class="pln"> moviesRef </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">(</span><span class="string"><span class="str">"set"</span></span><span class="pun">).</span><span class="pln">v</span><span class="pun">(</span><span class="string"><span class="str">"moviesByNolan"</span></span><span class="pun">);</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> filters </span><span class="pun">=</span><span class="pln">  </span><span class="pun">{</span><span class="pln">limit</span><span class="pun">:</span><span class="pln"> </span><span class="number"><span class="lit">2</span></span><span class="pun">};</span><span class="pln">
moviesRef</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="string"><span class="str">'edge_added'</span></span><span class="pun">,</span><span class="pln"> filters</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> eRef</span><span class="pun">,</span><span class="pln"> eSnap</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">eSnap</span><span class="pun">.</span><span class="pln">properties</span><span class="pun">());</span><span class="pln">
</span><span class="pun">});</span></code></pre><h3 id="title-datamodel-threecolumns-false-retrieving-data-vertices-in-a-namespace">Vertices in a Namespace</h3><p>Namespaces are vertex containers, and it is possible to retrieve existing vertices, and listen to updates when new vertices are added or old vertices are removed.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="kwd">var</span><span class="pln"> movieNSRef </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">(</span><span class="string"><span class="str">"movie"</span></span><span class="pun">);</span><span class="pln">
movieNSRef</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="string"><span class="str">'vertex_added'</span></span><span class="pun">,</span><span class="pln"> filters</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> vRef</span><span class="pun">,</span><span class="pln"> snap</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">snap</span><span class="pun">.</span><span class="pln">properties</span><span class="pun">());</span><span class="pln">
</span><span class="pun">});</span></code></pre><p>The callback attached with <em>vertex_added</em> event is called for all the existing vertices. As new vertices are added, it is called for them too.</p><p>To listen to updates of vertex removal, use <em>vertex_removed</em> event.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="kwd">var</span><span class="pln"> movieNSRef </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">(</span><span class="string"><span class="str">"movie"</span></span><span class="pun">);</span><span class="pln">
movieNSRef</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="string"><span class="str">'vertex_removed'</span></span><span class="pun">,</span><span class="pln"> filters</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> vRef</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">vRef</span><span class="pun">.</span><span class="pln">name</span><span class="pun">(),</span><span class="pln"> </span><span class="string"><span class="str">"removed."</span></span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code></pre><h4>Search</h4><p>With ElasticSearch’s powerful APIs in the backend, Appbase supports full-text fuzzy search queries on the data stored into vertices of a namespace. A sample query on a namespace looks something like this: </p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="kwd">var</span><span class="pln"> query </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">text</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"</span><span class="number"><span class="str">2010</span></span><span class="str">"</span></span><span class="pun">,</span><span class="pln"> properties</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="string"><span class="str">"year"</span></span><span class="pun">]};</span><span class="pln">
</span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">(</span><span class="string"><span class="str">'movie'</span></span><span class="pun">).</span><span class="pln">search</span><span class="pun">(</span><span class="pln">query</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> arrayOfVertices</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="comment"><span class="com">//display vertices</span></span><span class="pln">
</span><span class="pun">});</span></code></pre><p>This query searches on all the vertices of the namespace <em>movie</em>, and returns an array of vertices who’s property <code>year</code>, matches fuzzily with the text “2010”. See <a href="http://docs.appbase.io/docs/search.html">this documentation</a> for more details.</p></div>
  <a class="edit" ng-href="https://github.com/appbaseio/Docs/tree/gh-pages/src/v2.0/concepts/datamodel.md" target="_blank" href="https://github.com/appbaseio/Docs/tree/gh-pages/src/v2.0/concepts/datamodel.md">
    <span class="fa fa-pencil"></span>
  </a>
</div></div>

  <script type="text/javascript" src="scripts/main.js"></script>
  <script type="text/javascript" src="/Docs/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

</body></html>