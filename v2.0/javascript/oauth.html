<html><head><style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\:form{display:block;}</style>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width">

  <title>Appbase Documentation</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" type="text/css" href="/Docs/bower_components/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="/Docs/bower_components/bootstrap/dist/css/bootstrap-theme.min.css">
  <script type="text/javascript">
    if (!Function.prototype.bind) {
Function.prototype.bind = function bind(that) { // .length is 1
        var slice = [].slice;
        var Empty = function(){};
        var target = this;
        if (typeof target != "function") {
            throw new TypeError("Function.prototype.bind called on incompatible " + target);
        }
        var args = slice.call(arguments, 1); // for normal call
        var bound = function () {

            if (this instanceof bound) {

                var result = target.apply(
                    this,
                    args.concat(slice.call(arguments))
                );
                if (Object(result) === result) {
                    return result;
                }
                return this;

            } else {
                return target.apply(
                    that,
                    args.concat(slice.call(arguments))
                );

            }

        };
        if(target.prototype) {
            Empty.prototype = target.prototype;
            bound.prototype = new Empty();
            Empty.prototype = null;
        }
        return bound;
    };  
}
  </script>
  <!-- Flatdoc -->
  <script type="text/javascript" src="/Docs/bower_components/jquery/dist/jquery.min.js"></script>
  <script type="text/javascript" src="/Docs/bower_components/flatdoc/legacy.js"></script>
  <script type="text/javascript" src="/Docs/bower_components/flatdoc/flatdoc.js"></script>

  <!-- Flatdoc theme -->
  <link rel="stylesheet" type="text/css" href="/Docs/bower_components/flatdoc/theme-white/style.css">
  <script type="text/javascript" src="/Docs/bower_components/docbase/scripts/flatdoc-theme.js"></script>

  <!-- DocBase -->
  <script type="text/javascript" src="/Docs/bower_components/angular/angular.js"></script>
  <script type="text/javascript" src="/Docs/bower_components/angular-route/angular-route.js"></script>
  <script type="text/javascript" src="/Docs/bower_components/js-schema/js-schema.min.js"></script>
  <script type="text/javascript" src="/Docs/bower_components/docbase/scripts/docbase.js"></script>
  <script src="/Docs/bower_components/google-code-prettify/bin/prettify.min.js"></script>
  <link rel="stylesheet" type="text/css" href="/Docs/bower_components/google-code-prettify/bin/prettify.min.css">
  <link rel="stylesheet" type="text/css" href="/Docs/bower_components/docbase/styles/main.css">
  <link rel="stylesheet" type="text/css" href="/Docs/bower_components/components-font-awesome/css/font-awesome.min.css">
  

  <!-- Custom -->
  <link rel="stylesheet" type="text/css" href="styles/main.css">

</head>
<body role="flatdoc" class="">
  <!--[if lt IE 10]>
     <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
  <![endif]-->

  <!-- ngView:  --><div ng-view="" class="ng-scope"><nav class="navbar navbar-default navbar-fixed-top ng-scope">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#/">
        <img src="images/logo.svg">
      </a>
    </div>

    <div class="collapse navbar-collapse" id="navbar-collapse">
      <ul class="nav navbar-nav">
      	<!-- ngRepeat: folder in map[currentVersion] --><li class="dropdown ng-scope" ng-repeat="folder in map[currentVersion]">
      		<a ng-href="#/v2.0/concepts" class="dropdown-toggle ng-binding" data-toggle="dropdown" role="button" aria-expanded="false" ng-bind="folder.label" href="#/v2.0/concepts">concepts</a>
      		<ul class="dropdown-menu">
      		  <!-- ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
      		  	<a ng-href=/Docs/v2.0/concepts/datamodel.html ng-bind="file.label" class="ng-binding" href=/Docs/v2.0/concepts/datamodel.html>datamodel</a>
      		  </li><!-- end ngRepeat: file in folder.files -->
      		</ul>
      	</li><!-- end ngRepeat: folder in map[currentVersion] --><li class="dropdown ng-scope" ng-repeat="folder in map[currentVersion]">
      		<a ng-href="#/v2.0/javascript" class="dropdown-toggle ng-binding" data-toggle="dropdown" role="button" aria-expanded="false" ng-bind="folder.label" href="#/v2.0/javascript">javascript</a>
      		<ul class="dropdown-menu">
      		  <!-- ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
      		  	<a ng-href=/Docs/v2.0/javascript/angular.html ng-bind="file.label" class="ng-binding" href=/Docs/v2.0/javascript/angular.html>angular</a>
      		  </li><!-- end ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
      		  	<a ng-href=/Docs/v2.0/javascript/api-reference.html ng-bind="file.label" class="ng-binding" href=/Docs/v2.0/javascript/api-reference.html>api-reference</a>
      		  </li><!-- end ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
      		  	<a ng-href=/Docs/v2.0/javascript/oauth.html ng-bind="file.label" class="ng-binding" href=/Docs/v2.0/javascript/oauth.html>oauth</a>
      		  </li><!-- end ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
      		  	<a ng-href=/Docs/v2.0/javascript/quick-start.html ng-bind="file.label" class="ng-binding" href=/Docs/v2.0/javascript/quick-start.html>quick-start</a>
      		  </li><!-- end ngRepeat: file in folder.files -->
      		</ul>
      	</li><!-- end ngRepeat: folder in map[currentVersion] --><li class="dropdown ng-scope" ng-repeat="folder in map[currentVersion]">
      		<a ng-href="#/v2.0/rest" class="dropdown-toggle ng-binding" data-toggle="dropdown" role="button" aria-expanded="false" ng-bind="folder.label" href="#/v2.0/rest">rest</a>
      		<ul class="dropdown-menu">
      		  <!-- ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
      		  	<a ng-href=/Docs/v2.0/rest/api-reference.html ng-bind="file.label" class="ng-binding" href=/Docs/v2.0/rest/api-reference.html>api-reference</a>
      		  </li><!-- end ngRepeat: file in folder.files -->
      		</ul>
      	</li><!-- end ngRepeat: folder in map[currentVersion] --><li class="dropdown ng-scope" ng-repeat="folder in map[currentVersion]">
      		<a ng-href="#/v2.0/search" class="dropdown-toggle ng-binding" data-toggle="dropdown" role="button" aria-expanded="false" ng-bind="folder.label" href="#/v2.0/search">search</a>
      		<ul class="dropdown-menu">
      		  <!-- ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
      		  	<a ng-href=/Docs/v2.0/search/quick-start.html ng-bind="file.label" class="ng-binding" href=/Docs/v2.0/search/quick-start.html>quick-start</a>
      		  </li><!-- end ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
      		  	<a ng-href=/Docs/v2.0/search/use-cases.html ng-bind="file.label" class="ng-binding" href=/Docs/v2.0/search/use-cases.html>use-cases</a>
      		  </li><!-- end ngRepeat: file in folder.files -->
      		</ul>
      	</li><!-- end ngRepeat: folder in map[currentVersion] -->
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
          	 <span ng-bind="currentVersion" class="ng-binding">v2.0</span> <span class="caret"></span>
          </a>
          <ul class="dropdown-menu version-switcher" role="menu">
          	<!-- ngRepeat: version in versions --><li ng-repeat="version in versions" class="ng-scope">
          		<a ng-href=/Docs/v2.0.html ng-bind="version" class="ng-binding" href=/Docs/v2.0.html>v2.0</a>
          	</li><!-- end ngRepeat: version in versions --><li ng-repeat="version in versions" class="ng-scope">
          		<a ng-href=/Docs/v3.0.html ng-bind="version" class="ng-binding" href=/Docs/v3.0.html>v3.0</a>
          	</li><!-- end ngRepeat: version in versions -->
          </ul>
        </li>
        <li class="github-star">
          <iframe src="https://ghbtns.com/github-btn.html?user=appbaseio&amp;repo=Docs&amp;type=star&amp;count=true" frameborder="0" scrolling="0" width="170px" height="20px"></iframe>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
<div role="flatdoc" class="content-root ng-scope">
  <div class="menubar fixed">
    <div class="menu section" role="flatdoc-menu"><ul><li id="root-item" class="level-0"><ul class="level-1" id="root-list"><li id="title-user-authentication-threecolumns-true-item" class="level-1"><a id="title-user-authentication-threecolumns-true-link" href="/Docs/v2.0/javascript/oauth.html#title-user-authentication-threecolumns-true" class="level-1" pref="#title-user-authentication-threecolumns-true">User Authentication</a><ul class="level-2" id="title-user-authentication-threecolumns-true-list"><li id="title-user-authentication-threecolumns-true-configuring-login-item" class="level-2"><a id="title-user-authentication-threecolumns-true-configuring-login-link" href="/Docs/v2.0/javascript/oauth.html#title-user-authentication-threecolumns-true-configuring-login" class="level-2" pref="#title-user-authentication-threecolumns-true-configuring-login">Configuring Login</a></li><li id="title-user-authentication-threecolumns-true-enabling-providers-item" class="level-2"><a id="title-user-authentication-threecolumns-true-enabling-providers-link" href="/Docs/v2.0/javascript/oauth.html#title-user-authentication-threecolumns-true-enabling-providers" class="level-2" pref="#title-user-authentication-threecolumns-true-enabling-providers">Enabling Providers</a></li><li id="title-user-authentication-threecolumns-true-logging-user-in-item" class="level-2"><a id="title-user-authentication-threecolumns-true-logging-user-in-link" href="/Docs/v2.0/javascript/oauth.html#title-user-authentication-threecolumns-true-logging-user-in" class="level-2" pref="#title-user-authentication-threecolumns-true-logging-user-in">Logging User In</a></li><li id="title-user-authentication-threecolumns-true-accessing-providers-data-apis-item" class="level-2"><a id="title-user-authentication-threecolumns-true-accessing-providers-data-apis-link" href="/Docs/v2.0/javascript/oauth.html#title-user-authentication-threecolumns-true-accessing-providers-data-apis" class="level-2" pref="#title-user-authentication-threecolumns-true-accessing-providers-data-apis">Accessing provider’s data APIs</a></li><li id="title-user-authentication-threecolumns-true-caching-credentials-item" class="level-2"><a id="title-user-authentication-threecolumns-true-caching-credentials-link" href="/Docs/v2.0/javascript/oauth.html#title-user-authentication-threecolumns-true-caching-credentials" class="level-2" pref="#title-user-authentication-threecolumns-true-caching-credentials">Caching Credentials</a></li><li id="title-user-authentication-threecolumns-true-dealing-with-popups-and-redirects-item" class="level-2"><a id="title-user-authentication-threecolumns-true-dealing-with-popups-and-redirects-link" href="/Docs/v2.0/javascript/oauth.html#title-user-authentication-threecolumns-true-dealing-with-popups-and-redirects" class="level-2" pref="#title-user-authentication-threecolumns-true-dealing-with-popups-and-redirects">Dealing with Popups and Redirects</a></li><li id="title-user-authentication-threecolumns-true-working-with-scopes-and-additional-parameters-item" class="level-2"><a id="title-user-authentication-threecolumns-true-working-with-scopes-and-additional-parameters-link" href="/Docs/v2.0/javascript/oauth.html#title-user-authentication-threecolumns-true-working-with-scopes-and-additional-parameters" class="level-2" pref="#title-user-authentication-threecolumns-true-working-with-scopes-and-additional-parameters">Working with Scopes, and additional parameters</a></li><li id="title-user-authentication-threecolumns-true-logging-users-out-item" class="level-2"><a id="title-user-authentication-threecolumns-true-logging-users-out-link" href="/Docs/v2.0/javascript/oauth.html#title-user-authentication-threecolumns-true-logging-users-out" class="level-2" pref="#title-user-authentication-threecolumns-true-logging-users-out">Logging Users Out</a></li><li id="title-user-authentication-threecolumns-true-code-samples-item" class="level-2"><a id="title-user-authentication-threecolumns-true-code-samples-link" href="/Docs/v2.0/javascript/oauth.html#title-user-authentication-threecolumns-true-code-samples" class="level-2" pref="#title-user-authentication-threecolumns-true-code-samples">Code Samples</a></li></ul></li><li id="authentication-additional-guide-item" class="level-1"><a id="authentication-additional-guide-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide" class="level-1" pref="#authentication-additional-guide">Authentication - additional guide</a><ul class="level-2" id="authentication-additional-guide-list"><li id="authentication-additional-guide-scopes-item" class="level-2"><a id="authentication-additional-guide-scopes-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-scopes" class="level-2" pref="#authentication-additional-guide-scopes">Scopes</a></li><li id="authentication-additional-guide-google-item" class="level-2"><a id="authentication-additional-guide-google-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-google" class="level-2" pref="#authentication-additional-guide-google">Google</a><ul class="level-3" id="authentication-additional-guide-google-list"><li id="authentication-additional-guide-google-required-paramters-item" class="level-3"><a id="authentication-additional-guide-google-required-paramters-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-google-required-paramters" class="level-3" pref="#authentication-additional-guide-google-required-paramters">Required paramters</a></li><li id="authentication-additional-guide-google-minimal-code-item" class="level-3"><a id="authentication-additional-guide-google-minimal-code-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-google-minimal-code" class="level-3" pref="#authentication-additional-guide-google-minimal-code">Minimal Code</a></li><li id="authentication-additional-guide-google-additional-docs-item" class="level-3"><a id="authentication-additional-guide-google-additional-docs-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-google-additional-docs" class="level-3" pref="#authentication-additional-guide-google-additional-docs">Additional docs</a></li><li id="authentication-additional-guide-google-calling-apis-item" class="level-3"><a id="authentication-additional-guide-google-calling-apis-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-google-calling-apis" class="level-3" pref="#authentication-additional-guide-google-calling-apis">Calling APIs</a></li></ul></li><li id="authentication-additional-guide-facebook-item" class="level-2"><a id="authentication-additional-guide-facebook-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-facebook" class="level-2" pref="#authentication-additional-guide-facebook">Facebook</a><ul class="level-3" id="authentication-additional-guide-facebook-list"><li id="authentication-additional-guide-facebook-minimal-code-item" class="level-3"><a id="authentication-additional-guide-facebook-minimal-code-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-facebook-minimal-code" class="level-3" pref="#authentication-additional-guide-facebook-minimal-code">Minimal Code</a></li><li id="authentication-additional-guide-facebook-additional-docs-item" class="level-3"><a id="authentication-additional-guide-facebook-additional-docs-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-facebook-additional-docs" class="level-3" pref="#authentication-additional-guide-facebook-additional-docs">Additional docs</a></li></ul></li><li id="authentication-additional-guide-linkedin-item" class="level-2"><a id="authentication-additional-guide-linkedin-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-linkedin" class="level-2" pref="#authentication-additional-guide-linkedin">LinkedIn</a><ul class="level-3" id="authentication-additional-guide-linkedin-list"><li id="authentication-additional-guide-linkedin-minimal-code-item" class="level-3"><a id="authentication-additional-guide-linkedin-minimal-code-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-linkedin-minimal-code" class="level-3" pref="#authentication-additional-guide-linkedin-minimal-code">Minimal Code</a></li><li id="authentication-additional-guide-linkedin-additional-docs-item" class="level-3"><a id="authentication-additional-guide-linkedin-additional-docs-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-linkedin-additional-docs" class="level-3" pref="#authentication-additional-guide-linkedin-additional-docs">Additional docs</a></li></ul></li><li id="authentication-additional-guide-github-item" class="level-2"><a id="authentication-additional-guide-github-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-github" class="level-2" pref="#authentication-additional-guide-github">Github</a><ul class="level-3" id="authentication-additional-guide-github-list"><li id="authentication-additional-guide-github-minimal-code-item" class="level-3"><a id="authentication-additional-guide-github-minimal-code-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-github-minimal-code" class="level-3" pref="#authentication-additional-guide-github-minimal-code">Minimal Code</a></li><li id="authentication-additional-guide-github-additional-docs-item" class="level-3"><a id="authentication-additional-guide-github-additional-docs-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-github-additional-docs" class="level-3" pref="#authentication-additional-guide-github-additional-docs">Additional docs</a></li></ul></li><li id="authentication-additional-guide-dropbox-item" class="level-2"><a id="authentication-additional-guide-dropbox-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-dropbox" class="level-2" pref="#authentication-additional-guide-dropbox">Dropbox</a><ul class="level-3" id="authentication-additional-guide-dropbox-list"><li id="authentication-additional-guide-dropbox-minimal-code-item" class="level-3"><a id="authentication-additional-guide-dropbox-minimal-code-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-dropbox-minimal-code" class="level-3" pref="#authentication-additional-guide-dropbox-minimal-code">Minimal Code</a></li><li id="authentication-additional-guide-dropbox-additional-docs-item" class="level-3"><a id="authentication-additional-guide-dropbox-additional-docs-link" href="/Docs/v2.0/javascript/oauth.html#authentication-additional-guide-dropbox-additional-docs" class="level-3" pref="#authentication-additional-guide-dropbox-additional-docs">Additional docs</a></li></ul></li></ul></li></ul></li></ul></div>
  </div>
  <div role="flatdoc-content" class="content"><h1 id="title-user-authentication-threecolumns-true">User Authentication</h1><p>Most applications need to know the identity of a user. Knowing a user’s identity allows an app to provide a customized experience. The process of proving a user’s identity is called <em>authentication</em>.</p><p>Appbase makes authentication easy with completely client-side code. It has built-in functionality for third-party providers such as Facebook, LinkedIn, GitHub, Dropbox, and Google.</p><p>When a user authenticates to an Appbase app, the information about the user is returned in callbacks on the client device. This allows you to customize your app’s user experience for that specific user. Appbase also issues a <strong>requestObject</strong>, which makes it easy for you to access the providers’ data APIs.</p><p>Once a user authenticates to your app, Appbase manages their session, ensuring that the user is remembered across page refreshes and browser restarts.</p><h2 id="title-user-authentication-threecolumns-true-configuring-login">Configuring Login</h2><p>For security reasons, only domains that you whitelist are allowed to initiate authentication for your app.  All Appbase apps have localhost and 127.0.0.1 enabled by default for local development and testing. Add more authorized origins to enable authentication from domains where your host your app.</p><ol>
<li>Navigate to the <a href="http://appbase.io/developer/">Appbase Developer Console</a>.</li>
<li>Open the Authentication tab.</li>
<li>Select your app and add all of the domains that host your app to the Authorized domains field.</li>
</ol><h2 id="title-user-authentication-threecolumns-true-enabling-providers">Enabling Providers</h2><p>Next, you need to enable the provider that you selected for your Appbase.</p><ol>
<li>Navigate to the <a href="http://appbase.io/developer/">Appbase Developer Console</a>.</li>
<li>Open the Authentication tab.</li>
<li>Select your app and click <em>Add</em> on the provider.</li>
<li>Copy the <em>client ID</em> and <em>secret</em> from your provider, into the form.</li>
<li>Add the appbase domain and callback URL specified on the page, to your application settings on the provider’s page.</li>
</ol><p>Appbase is all set up for your provider. It’s time to code.</p><h2 id="title-user-authentication-threecolumns-true-logging-user-in">Logging User In</h2><p>The following code shows a popup and retrieves the user’s credentials for Appbase, and Facebook.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">authPopup</span><span class="pun">(</span><span class="string"><span class="str">'facebook'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> authObj</span><span class="pun">,</span><span class="pln"> requestObj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">error</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">'Error occured:'</span></span><span class="pun">,</span><span class="pln"> error</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">'Logged in as:'</span></span><span class="pun">,</span><span class="pln"> authObj</span><span class="pun">.</span><span class="pln">uid</span><span class="pun">);</span><span class="pln"> 
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">});</span></code></pre><p>Appbase automatically retrieves the basic information about the user (the <em>me</em> data) from the provider, the access tokens for Appbase and the provider and present it as the <em>authObj</em>.
<code>authObj</code> is a JSON object:</p><pre><code class="lang-json prettyprint prettyprinted" style=""><span class="pun">{</span><span class="pln">
    uid</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"User</span><span class="string"><span class="str">'s id as generated by the provider"</span></span><span class="pun">,</span><span class="pln">
    firtsname</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"First name of the user"</span></span><span class="pun">,</span><span class="pln">
    lastname</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"Last name of the user"</span></span><span class="pun">,</span><span class="pln">
    email</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"Email id of the user"</span></span><span class="pun">,</span><span class="pln">
    avatar</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"URL to the profile picture of the user"</span></span><span class="pun">,</span><span class="pln">
    raw</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">the raw </span><span class="pun">`</span><span class="pln">me</span><span class="pun">`</span><span class="pln"> data retrieved from the provider</span><span class="pun">},</span><span class="pln">
    credentials</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        appbase</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            access_token</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"access token to access appbase REST api"</span></span><span class="pun">,</span><span class="pln">
            expires_in</span><span class="pun">:</span><span class="pln"> time in seconds</span><span class="pun">,</span><span class="pln">
            generated_at</span><span class="pun">:</span><span class="pln"> time since epoch in milliseconds
        </span><span class="pun">},</span><span class="pln">
        provider</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            provider</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"name of the provider"</span></span><span class="pun">,</span><span class="pln">
            access_token</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"access token to access provider'</span></span><span class="str">s data API"</span></span><span class="pun">,</span><span class="pln">
            expires_in</span><span class="pun">:</span><span class="pln"> time in seconds</span><span class="pun">,</span><span class="pln">
            generated_at</span><span class="pun">:</span><span class="pln"> time since epoch in milliseconds 
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre><p>Appbase stores and uses these tokens for accessing appbase REST api, and provider’s data APIs.</p><h2 id="title-user-authentication-threecolumns-true-accessing-providers-data-apis">Accessing provider’s data APIs</h2><p><code>requestObj</code> returned in the authentication can be used to you to perform API calls to a provider. It contains methods that wrap the usual HTTP methods: <code>.get()</code>, <code>.post()</code>, <code>.put()</code>, <code>.patch()</code>, and <code>.del()</code>.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="pln">requestObj</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="string"><span class="str">'/api/endpoint'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">...</span><span class="pln">
</span><span class="pun">});</span><span class="pln">
requestObj</span><span class="pun">.</span><span class="pln">post</span><span class="pun">(</span><span class="string"><span class="str">'/api/endpoint'</span></span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        data</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            post_field</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">'value'</span></span><span class="pun">,</span><span class="pln">
            </span><span class="comment"><span class="com">// ...</span></span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> response</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">);</span></code></pre><h2 id="title-user-authentication-threecolumns-true-caching-credentials">Caching Credentials</h2><p>Once the user logs in with a provider, the credentials are cached in localStorage automatically, and this helps staying logged in across browser restarts. To fetch these cached credentails call, <code>Appbase.getAuth()</code>.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="kwd">var</span><span class="pln"> cachedCreds </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">getAuth</span><span class="pun">();</span><span class="pln">
</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">getAuth </span><span class="pun">!==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">cachedCreds</span><span class="pun">.</span><span class="pln">authObj</span><span class="pun">.</span><span class="pln">uid</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">'Not authenticated.'</span></span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code></pre><p><code>getAuth()</code> saves you from calling <code>authPopup()</code> again for authenticating user when the user already went through the login flow previously. It returns the two objects described object: <em>authObj</em> and <em>requestObj</em>. If user is not authenticated, it returns <code>null</code>.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="kwd">var</span><span class="pln"> cachedCreds </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">getAuth</span><span class="pun">();</span><span class="pln">
</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">cachedCreds</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="comment"><span class="com">//access user</span><span class="string"><span class="com">'s profile with cachedCreds.authObj</span></span><span class="pln">
    </span><span class="comment"><span class="com">//access provider'</span></span><span class="com">s api with cachedCreds.requestObj</span></span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="comment"><span class="com">//need to call authPopup to log in</span></span><span class="pln">
</span><span class="pun">}</span></code></pre><h2 id="title-user-authentication-threecolumns-true-dealing-with-popups-and-redirects">Dealing with Popups and Redirects</h2><p>Appbase supports two different ways to authenticate with OAuth providers - via pop-up, or browser redirect.</p><p>Third-party authentication methods use a browser pop-up window, or browser redirect, to prompt the user to sign-in, approve the application, and return the user’s data to the requesting application.</p><p>Most modern browsers block pop-up windows unless they are invoked by direct user action. Therefore, we should only invoke the <code>authPopup()</code> method for third-party authentication upon the user’s click, otherwise <code>authRedirect()</code> should be used.</p><p><code>authRedirect()</code> redirects to the provider’s login page, where the user can accept your app’s permissions. Once he has, he is redirected to the callback url.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">authRedirect</span><span class="pun">(</span><span class="string"><span class="str">'provider'</span></span><span class="pun">,</span><span class="pln"> </span><span class="string"><span class="str">'http:</span><span class="comment"><span class="str">//yoururl.com/callback'</span></span><span class="pun">);</span></span></code></pre><p>After this call, at the page where the redirect URL points, call <code>authCallback()</code>, which allows you to retrieve the credentials.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="comment"><span class="com">//At the page where callback URL points</span></span><span class="pln">
</span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">authCallback</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> authObj</span><span class="pun">,</span><span class="pln"> requestObj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">error</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">'Error occured:'</span></span><span class="pun">,</span><span class="pln"> error</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">'Logged in as:'</span></span><span class="pun">,</span><span class="pln"> authObj</span><span class="pun">.</span><span class="pln">uid</span><span class="pun">);</span><span class="pln"> 
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">});</span></code></pre><h2 id="title-user-authentication-threecolumns-true-working-with-scopes-and-additional-parameters">Working with Scopes, and additional parameters</h2><p>Providers require different scope parameters, to access the user’s data on their APIs. 
For eg. </p><ul>
<li>The scope <em>openid</em> is required for Google, in order to retrieve the user’s ID and basic information, otherwise, user’s id is not accessible and <code>Appbase.authPopup()</code> will throw  error: “user’s id not present”.</li>
<li>LinkedIn requires <em>r_emailaddress</em> scope, to access the email address of the user. Without specifying this scope, the <code>authObj</code> will not contain <em>email</em> field.</li>
</ul><p>Providers might even require additional parameters, which can be defined in the options to <code>Appbase.authPopup()</code> ,along with the <em>scope</em>:</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">authPopup</span><span class="pun">(</span><span class="string"><span class="str">'google'</span></span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    authorize</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            scope</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="string"><span class="str">'openid'</span></span><span class="pun">]</span><span class="pln">
            </span><span class="comment"><span class="com">//define additional paramters required for the provider here</span></span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> callback</span><span class="pun">);</span><span class="pln">

</span><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">authPopup</span><span class="pun">(</span><span class="string"><span class="str">'linkedin'</span></span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    authorize</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            scope</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="string"><span class="str">'r_emailaddress'</span></span><span class="pun">]</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> callback</span><span class="pun">);</span></code></pre><p>Findout the different configurations, scopes and code samples for all the providers <a href="/Docs/docs/auth_providers-samples.md">here</a>.</p><h2 id="title-user-authentication-threecolumns-true-logging-users-out">Logging Users Out</h2><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">unauth</span><span class="pun">();</span></code></pre><p>This will remove the credentials from memory and all the requests to Appbase server and, and provider’s API will fail.</p><h2 id="title-user-authentication-threecolumns-true-code-samples">Code Samples</h2><p>Findout code samples for all the providers <a href="/Docs/docs/auth_providers-samples.md">here</a>.</p><h1 id="authentication-additional-guide">Authentication - additional guide</h1><p>Every provider requires Oauth paramters to be passed while authenticating. Mostly, they are the same across all providers, for eg. redirect_url, token_type, client_id etc. Appbase takes care of these paramters, except for some cases, which depends on the developer’s need. This document explains how to provide these paramters while authenticating with Appbase and a provider, plus provides links to provider’s additional documentation.</p><p>You can directly use the code snippets given here for a provider, and the authentication will work out of the box.</p><h2 id="authentication-additional-guide-scopes">Scopes</h2><p>Scoping allows OAuth clients to tell an authorization server what permissions they’ll need on resources they’re accessing. The required scopes, can be specified while calling <code>Appbase.authPopup()</code>, and then we can access the data using <code>requestObject</code>, and calling provider’s data endpoints.</p><h2 id="authentication-additional-guide-google">Google</h2><h3 id="authentication-additional-guide-google-required-paramters">Required paramters</h3><ul>
<li><strong>scope</strong>: ‘openid’, which allows us to access basic information about the user.</li>
</ul><h3 id="authentication-additional-guide-google-minimal-code">Minimal Code</h3><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">authPopup</span><span class="pun">(</span><span class="string"><span class="str">'google'</span></span><span class="pun">,</span><span class="pln">
</span><span class="pun">{</span><span class="pln"> authorize</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> scope</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="string"><span class="str">'openid'</span></span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span><span class="pln">
</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> authObj</span><span class="pun">,</span><span class="pln"> requestObj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">'Logged in as:'</span></span><span class="pun">,</span><span class="pln"> authObj</span><span class="pun">.</span><span class="pln">uid</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code></pre><h3 id="authentication-additional-guide-google-additional-docs">Additional docs</h3><p>Find out more about scopes and API endpoints supported by Google <a href="https://developers.google.com/+/api/oauth#scopes">here</a>.</p><h3 id="authentication-additional-guide-google-calling-apis">Calling APIs</h3><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">authPopup</span><span class="pun">(</span><span class="string"><span class="str">'google'</span></span><span class="pun">,</span><span class="pln">
</span><span class="pun">{</span><span class="pln"> authorize</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> scope</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="string"><span class="str">'openid email profile'</span></span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span><span class="pln">
</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> authObj</span><span class="pun">,</span><span class="pln"> requestObj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">'Logged in as:'</span></span><span class="pun">,</span><span class="pln"> authObj</span><span class="pun">.</span><span class="pln">uid</span><span class="pun">);</span><span class="pln">
    </span><span class="comment"><span class="com">// requests the profile of the user</span></span><span class="pln">
    request</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="string"><span class="str">'plus/v</span><span class="number"><span class="str">1</span></span><span class="str">/people/me'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="pun">...</span><span class="pln">
    </span><span class="pun">});</span><span class="pln">
</span><span class="pun">});</span></code></pre><h2 id="authentication-additional-guide-facebook">Facebook</h2><h3 id="authentication-additional-guide-facebook-minimal-code">Minimal Code</h3><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">authPopup</span><span class="pun">(</span><span class="string"><span class="str">'facebook'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> authObj</span><span class="pun">,</span><span class="pln"> requestObj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">'Logged in as:'</span></span><span class="pun">,</span><span class="pln"> authObj</span><span class="pun">.</span><span class="pln">uid</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code></pre><h3 id="authentication-additional-guide-facebook-additional-docs">Additional docs</h3><p>Find out more about scopes and API endpoints supported by Facebook <a href="https://developers.facebook.com/docs/facebook-login/permissions/v2.1">here</a>.</p><h2 id="authentication-additional-guide-linkedin">LinkedIn</h2><h3 id="authentication-additional-guide-linkedin-minimal-code">Minimal Code</h3><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">authPopup</span><span class="pun">(</span><span class="string"><span class="str">'linkedin'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> authObj</span><span class="pun">,</span><span class="pln"> requestObj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">'Logged in as:'</span></span><span class="pun">,</span><span class="pln"> authObj</span><span class="pun">.</span><span class="pln">uid</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code></pre><h3 id="authentication-additional-guide-linkedin-additional-docs">Additional docs</h3><p>Find out more about scopes and API endpoints supported by LinkedIn <a href="https://developer.linkedin.com/documents/authentication#granting">here</a>.</p><h2 id="authentication-additional-guide-github">Github</h2><h3 id="authentication-additional-guide-github-minimal-code">Minimal Code</h3><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">authPopup</span><span class="pun">(</span><span class="string"><span class="str">'github'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> authObj</span><span class="pun">,</span><span class="pln"> requestObj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">'Logged in as:'</span></span><span class="pun">,</span><span class="pln"> authObj</span><span class="pun">.</span><span class="pln">uid</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code></pre><h3 id="authentication-additional-guide-github-additional-docs">Additional docs</h3><p>Find out more about scopes and API endpoints supported by Github <a href="https://developer.github.com/v3/oauth/#scopes">here</a>.</p><h2 id="authentication-additional-guide-dropbox">Dropbox</h2><h3 id="authentication-additional-guide-dropbox-minimal-code">Minimal Code</h3><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="typ">Appbase</span><span class="pun">.</span><span class="pln">authPopup</span><span class="pun">(</span><span class="string"><span class="str">'dropbox'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">error</span><span class="pun">,</span><span class="pln"> authObj</span><span class="pun">,</span><span class="pln"> requestObj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">'Logged in as:'</span></span><span class="pun">,</span><span class="pln"> authObj</span><span class="pun">.</span><span class="pln">uid</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code></pre><h3 id="authentication-additional-guide-dropbox-additional-docs">Additional docs</h3><p>Find out more about API endpoints supported by Dropbox <a href="https://www.dropbox.com/developers/core/docs#account-info">here</a>.</p></div>
  <a class="edit" ng-href="https://github.com/appbaseio/Docs/tree/gh-pages/src/v2.0/javascript/oauth.md" target="_blank" href="https://github.com/appbaseio/Docs/tree/gh-pages/src/v2.0/javascript/oauth.md">
    <span class="fa fa-pencil"></span>
  </a>
</div></div>

  <script type="text/javascript" src="scripts/main.js"></script>
  <script type="text/javascript" src="/Docs/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

</body></html>